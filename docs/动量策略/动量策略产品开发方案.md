# åŠ¨é‡ç­–ç•¥(Momentum Regime Strategy)äº§å“å¼€å‘æ–¹æ¡ˆ

> **ç‰ˆæœ¬**: v1.0  
> **åˆ¶å®šæ—¥æœŸ**: 2025-11-13  
> **ç­–ç•¥ä»£å·**: MOMENTUM_REGIME_V1  
> **ä¼˜å…ˆçº§**: é«˜ï¼ˆæ——èˆ°ç­–ç•¥ï¼‰

---

## ğŸ“‹ ç›®å½•

1. [ç­–ç•¥æ¦‚è¿°](#ä¸€ç­–ç•¥æ¦‚è¿°)
2. [æ¶æ„è®¾è®¡](#äºŒæ¶æ„è®¾è®¡)
3. [æ ¸å¿ƒç»„ä»¶](#ä¸‰æ ¸å¿ƒç»„ä»¶)
4. [æ•°æ®æµè®¾è®¡](#å››æ•°æ®æµè®¾è®¡)
5. [å®æ–½è®¡åˆ’](#äº”å®æ–½è®¡åˆ’)
6. [æµ‹è¯•ä¸ä¸Šçº¿](#å…­æµ‹è¯•ä¸ä¸Šçº¿)
7. [é£é™©ä¸ç›‘æ§](#ä¸ƒé£é™©ä¸ç›‘æ§)

---

## ä¸€ã€ç­–ç•¥æ¦‚è¿°

### 1.1 è®¾è®¡å“²å­¦

**"æŠ€æœ¯åˆ†æä¸»å¯¼ + åˆ¶åº¦ç¡®è®¤å¢å¼º"** (Technical Analysis Driven + Regime Confirmation)

æœ¬ç­–ç•¥é‡‡ç”¨**æŠ€æœ¯ä¸»å¯¼ã€åˆ¶åº¦è¾…åŠ©**çš„å†³ç­–æ¶æ„:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Technical Analysis Layer (æŠ€æœ¯åˆ†æå±‚)   â”‚
â”‚  å¤šæ—¶é—´æ¡†æ¶æŠ€æœ¯æŒ‡æ ‡ â†’ ç”Ÿæˆäº¤æ˜“ä¿¡å·        â”‚
â”‚  å†³å®š"åšä»€ä¹ˆäº¤æ˜“"(LONG/SHORT/NEUTRAL)    â”‚
â”‚  â­ ä¸»å¯¼å†³ç­– - æƒé‡80%                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Regime Confirmation Layer (åˆ¶åº¦ç¡®è®¤å±‚)  â”‚
â”‚  AIè¯„ä¼°å¸‚åœºå¥åº·åº¦ â†’ Regime Score 0-100   â”‚
â”‚  1. ç¡®è®¤ä¿¡å·æœ‰æ•ˆæ€§ (è¿‡æ»¤æç«¯é€†åŠ¿)         â”‚
â”‚  2. è°ƒåˆ¶ä»“ä½/æ æ† (æ”¾å¤§/ç¼©å°)            â”‚
â”‚  â­ è¾…åŠ©å¢å¼º - æƒé‡20%                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Risk Management Layer (é£æ§å±‚)          â”‚
â”‚  âœ… å¼ºåˆ¶æ­¢ç›ˆæ­¢æŸ (åŸºäºATR)               â”‚
â”‚  âœ… OCOè®¢å•åŒæ—¶è®¾ç½®                      â”‚
â”‚  âœ… ä¸å…è®¸è£¸ä»“äº¤æ˜“                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ç­–ç•¥ç‰¹ç‚¹

| ç‰¹æ€§ | è¯´æ˜ |
|-----|------|
| **äº¤æ˜“æ ‡çš„** | BTC, ETH, SOL (æœªæ¥å¯æ‰©å±•) |
| **äº¤æ˜“é¢‘ç‡** | 15åˆ†é’ŸKçº¿ (ä¸­é«˜é¢‘æ³¢æ®µ) |
| **é£é™©åå¥½** | æ¿€è¿›å‹ (æ”¯æŒæ æ†å’ŒåŠ¨æ€ä»“ä½) |
| **å†³ç­–æ–¹å¼** | **æŠ€æœ¯åˆ†æä¸»å¯¼(80%)** + åˆ¶åº¦ç¡®è®¤å¢å¼º(20%) |
| **æ ¸å¿ƒä¼˜åŠ¿** | æŠ€æœ¯ä¿¡å·ç²¾å‡†æ•æ‰åŠ¨é‡,åˆ¶åº¦è¿‡æ»¤å™¨é¿å…æç«¯é€†åŠ¿ |
| **æ­¢ç›ˆæ­¢æŸ** | **å¼ºåˆ¶è¦æ±‚**æ¯ç¬”äº¤æ˜“åŒæ—¶è®¾ç½®SL/TP,ä½¿ç”¨OCOè®¢å• |

### 1.3 ä¸ç°æœ‰Multi-Agentç­–ç•¥çš„å¯¹æ¯”

| ç»´åº¦ | Multi-Agent BTC | Momentum Regime |
|-----|----------------|-----------------|
| **å†³ç­–æ–¹å¼** | å¤šAgentåŠ æƒæŠ•ç¥¨ | **æŠ€æœ¯åˆ†æä¸»å¯¼**+åˆ¶åº¦å¢å¼º |
| **äº¤æ˜“é¢‘ç‡** | 4å°æ—¶(ä¸­é•¿æœŸ) | 15åˆ†é’Ÿ(ä¸­é«˜é¢‘) |
| **å¸ç§æ•°é‡** | å•ä¸€(BTC) | å¤šå¸ç§(BTC/ETH/SOL) |
| **é£é™©ç®¡ç†** | å›ºå®šå‚æ•° | åŠ¨æ€è°ƒåˆ¶å‚æ•° |
| **é€‚ç”¨åœºæ™¯** | è¶‹åŠ¿è¡Œæƒ… | åŠ¨é‡è¡Œæƒ… |
| **Agentç»„åˆ** | Macro+OnChain+TA | **TA(ä¸»)**+Regime(è¾…) |
| **æ­¢ç›ˆæ­¢æŸ** | å¯é€‰ | **å¼ºåˆ¶è¦æ±‚OCOè®¢å•** |

---

## äºŒã€æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Strategy Template                     â”‚
â”‚              momentum_regime_multiasset_v1              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Step 1: Data Collection                â”‚
    â”‚  - å¸‚åœºæ•°æ® (BTC/ETH/SOL 15åˆ†é’ŸKçº¿)            â”‚
    â”‚  - å®è§‚æ•°æ® (ETFæµå…¥/èµ„é‡‘è´¹ç‡/ææƒ§æŒ‡æ•°)         â”‚
    â”‚  - è¡ç”Ÿå“æ•°æ® (æŒä»“é‡/èµ„é‡‘è´¹ç‡/æœŸè´§æº¢ä»·)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      Step 2: Business Agents Analysis          â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
    â”‚  â”‚RegimeFilter â”‚  â”‚TA Momentum â”‚  å¹¶è¡Œæ‰§è¡Œ     â”‚
    â”‚  â”‚   Agent     â”‚  â”‚   Agent    â”‚              â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
    â”‚     â†“ Regime Score   â†“ Tech Signals           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    Step 3: Decision Agent (MomentumDecision)   â”‚
    â”‚  - æ ¹æ®Regime Scoreè°ƒåˆ¶äº¤æ˜“å‚æ•°                â”‚
    â”‚  - å¯¹æ¯ä¸ªå¸ç§ç”Ÿæˆç‹¬ç«‹ä¿¡å·                      â”‚
    â”‚  - è®¡ç®—åŠ¨æ€ä»“ä½å’Œæ­¢æŸæ­¢ç›ˆ                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Step 4: Paper Trading Execution        â”‚
    â”‚  - å¤šå¸ç§å¹¶è¡Œäº¤æ˜“                              â”‚
    â”‚  - ç‹¬ç«‹é£æ§å’Œæ­¢æŸ                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **åˆ¶åº¦ä¼˜å…ˆ** (Regime First): å…ˆè¯„ä¼°"è¯¥ä¸è¯¥äº¤æ˜“",å†è€ƒè™‘"æ€ä¹ˆäº¤æ˜“"
2. **å‚æ•°åŠ¨æ€åŒ–** (Dynamic Parameters): æ ¹æ®å¸‚åœºç¯å¢ƒå®æ—¶è°ƒæ•´é£é™©å‚æ•°
3. **å¤šå¸ç§ç‹¬ç«‹** (Multi-Asset Independent): æ¯ä¸ªå¸ç§ç‹¬ç«‹ä¿¡å·,ç‹¬ç«‹é£æ§
4. **è§„åˆ™å¯è¿½æº¯** (Traceable Rules): æ‰€æœ‰å‚æ•°è°ƒåˆ¶é€»è¾‘æ˜ç¡®è®°å½•

---

## ä¸‰ã€æ ¸å¿ƒç»„ä»¶

### 3.1 RegimeFilterAgent (åˆ¶åº¦è¿‡æ»¤å™¨)

#### 3.1.1 èŒè´£å®šä¹‰

**æ ¸å¿ƒä»»åŠ¡**: ç»¼åˆè¯„ä¼°å½“å‰å¸‚åœºç¯å¢ƒçš„"äº¤æ˜“é€‚å®œåº¦",è¾“å‡ºRegime Score (0-100)

**è¾“å…¥æ•°æ®**:

| ç±»åˆ« | æŒ‡æ ‡ | æ•°æ®æº | æƒé‡ |
|-----|------|--------|------|
| **å®è§‚æµåŠ¨æ€§** | ETFå‡€æµå…¥/æµå‡º | CoinGlass/Binance | 25% |
| | ç¾å…ƒæŒ‡æ•°(DXY) | FRED API | 10% |
| | é™æ¯æ¦‚ç‡ | FRED API | 10% |
| **å¸‚åœºæƒ…ç»ª** | Fear & Greed Index | Alternative.me | 20% |
| **è¡ç”Ÿå“å¥åº·åº¦** | BTC/ETH/SOLèµ„é‡‘è´¹ç‡ | Binance Futures | 15% |
| | æŒä»“é‡å˜åŒ– | Binance Futures | 10% |
| | æœŸè´§æº¢ä»·ç‡ | Binance Futures | 5% |
| **é“¾ä¸Šä¿¡å·** | MVRV Z-Score | Blockchain.info | 5% |

#### 3.1.2 è¯„åˆ†é€»è¾‘ (Regime Score è®¡ç®—)

```python
Regime Scoreè®¡ç®—æµç¨‹:

1. é¢„å¤„ç†å„æŒ‡æ ‡ â†’ æ ‡å‡†åŒ–åˆ° [-1, +1]
   
   - ETFæµå…¥: >$100M â†’ +1, <-$100M â†’ -1
   - Fear & Greed: <20 â†’ -1, >80 â†’ +1, 50 â†’ 0
   - èµ„é‡‘è´¹ç‡: è¿‡é«˜(>0.05%) â†’ -0.5, æ­£å¸¸ â†’ 0, è´Ÿå€¼ â†’ +0.3
   - MVRV: >7 â†’ -1 (æ³¡æ²«), <1 â†’ +1 (ä½ä¼°), 2-4 â†’ 0

2. åŠ æƒæ±‡æ€» â†’ Base Score [-1, +1]
   
   Base = Î£(æŒ‡æ ‡å€¼ Ã— æƒé‡)

3. å½’ä¸€åŒ–åˆ° [0, 100]
   
   Regime Score = (Base + 1) Ã— 50

4. LLMå¢å¼º (å¯é€‰)
   
   - LLMè¯»å–å„æŒ‡æ ‡å’Œåˆæ­¥Score
   - LLMè€ƒè™‘æŒ‡æ ‡é—´çš„éçº¿æ€§å…³ç³»
   - LLMå¯å¾®è°ƒ Â±10 åˆ†
   - è¾“å‡ºæœ€ç»ˆRegime Scoreå’Œè§£é‡Š
```

#### 3.1.3 è¾“å‡ºç¤ºä¾‹

```json
{
  "regime_score": 72.5,
  "regime_classification": "BULLISH",  // BEARISH/NEUTRAL/BULLISH
  "confidence": 0.85,
  "reasoning": "å®è§‚æµåŠ¨æ€§æ”¹å–„(ETFè¿ç»­3æ—¥å‡€æµå…¥),å¸‚åœºæƒ…ç»ªä¹è§‚(FG=65),è¡ç”Ÿå“å¸‚åœºå¥åº·(èµ„é‡‘è´¹ç‡æ­£å¸¸),ä½†MVRVç•¥é«˜éœ€å…³æ³¨",
  "component_scores": {
    "macro": 0.6,
    "sentiment": 0.7,
    "derivatives": 0.5,
    "onchain": 0.3
  },
  "risk_adjustment": "NORMAL",  // DEFENSIVE/NORMAL/AGGRESSIVE
  "recommended_action": "å¯ä»¥ç§¯æäº¤æ˜“,ä½†éœ€æ§åˆ¶å•ç¬”ä»“ä½"
}
```

### 3.2 TAMomentumAgent (æŠ€æœ¯åŠ¨é‡åˆ†æ)

#### 3.2.1 èŒè´£å®šä¹‰

**æ ¸å¿ƒä»»åŠ¡**: å¯¹æ¯ä¸ªå¸ç§(BTC/ETH/SOL)è¿›è¡ŒæŠ€æœ¯åˆ†æ,ç”ŸæˆåŠ¨é‡ä¿¡å·

**æŠ€æœ¯æŒ‡æ ‡é…ç½®**:

```yaml
Timeframes:
  - äº¤æ˜“å‘¨æœŸ: 15åˆ†é’Ÿ (ä¿¡å·ç”Ÿæˆ)
  - è¶‹åŠ¿å‘¨æœŸ: 60åˆ†é’Ÿ (è¶‹åŠ¿è¿‡æ»¤)

æŒ‡æ ‡å‚æ•°:
  EMA:
    - EMA_fast: 20 (15åˆ†é’Ÿ)
    - EMA_slow: 60 (15åˆ†é’Ÿ)
    - EMA_trend: 200 (60åˆ†é’Ÿ) # å¤§è¶‹åŠ¿è¿‡æ»¤
  
  RSI:
    - period: 14
    - è¶…å–: <30
    - è¶…ä¹°: >70
    - ä¸­æ€§: 40-60
  
  MACD:
    - fast: 12
    - slow: 26
    - signal: 9
  
  ATR:
    - period: 14
    - ç”¨äºåŠ¨æ€æ­¢æŸ
  
  æˆäº¤é‡:
    - MA_volume: 20
    - çªç ´ç¡®è®¤: volume > 1.5 Ã— MA_volume
```

#### 3.2.2 ä¿¡å·ç”Ÿæˆé€»è¾‘

**å¤šå¤´ä¿¡å· (LONG) è§¦å‘æ¡ä»¶**:

```
å¿…è¦æ¡ä»¶ (å…¨éƒ¨æ»¡è¶³):
1. è¶‹åŠ¿è¿‡æ»¤: ä»·æ ¼ > EMA_trend (60åˆ†é’Ÿ) â†’ å¤§è¶‹åŠ¿å‘ä¸Š
2. EMAé‡‘å‰: EMA_fast > EMA_slow (15åˆ†é’Ÿ) â†’ çŸ­æœŸåŠ¨é‡å‘ä¸Š
3. MACDç¡®è®¤: MACD > Signal ä¸” Histogram > 0 â†’ åŠ¨èƒ½åŠ é€Ÿ

è¾…åŠ©æ¡ä»¶ (æ»¡è¶³1ä¸ªåŠ åˆ†):
4. RSIçŠ¶æ€: 30 < RSI < 70 (é¿å…è¶…ä¹°è¶…å–æç«¯)
5. æˆäº¤é‡ç¡®è®¤: å½“å‰volume > 1.5 Ã— MA_volume
6. ä»·æ ¼çªç ´: ä»·æ ¼çªç ´è¿‘æœŸé˜»åŠ›ä½

ä¿¡å·å¼ºåº¦ (0-1):
- 3ä¸ªå¿…è¦æ¡ä»¶ + 0ä¸ªè¾…åŠ© â†’ strength = 0.6
- 3ä¸ªå¿…è¦æ¡ä»¶ + 1ä¸ªè¾…åŠ© â†’ strength = 0.75
- 3ä¸ªå¿…è¦æ¡ä»¶ + 2ä¸ªè¾…åŠ© â†’ strength = 0.85
- 3ä¸ªå¿…è¦æ¡ä»¶ + 3ä¸ªè¾…åŠ© â†’ strength = 1.0
```

**ç©ºå¤´ä¿¡å· (SHORT) è§¦å‘æ¡ä»¶**:

```
å¿…è¦æ¡ä»¶:
1. è¶‹åŠ¿è¿‡æ»¤: ä»·æ ¼ < EMA_trend (60åˆ†é’Ÿ)
2. EMAæ­»å‰: EMA_fast < EMA_slow (15åˆ†é’Ÿ)
3. MACDç¡®è®¤: MACD < Signal ä¸” Histogram < 0

è¾…åŠ©æ¡ä»¶:
4. RSIè¶…ä¹°: RSI > 70
5. æˆäº¤é‡ç¡®è®¤: volume > 1.5 Ã— MA_volume
6. ä»·æ ¼è·Œç ´: è·Œç ´æ”¯æ’‘ä½
```

**ä¸­æ€§ä¿¡å· (NEUTRAL)**: ä¸æ»¡è¶³å¤šå¤´æˆ–ç©ºå¤´æ¡ä»¶

#### 3.2.3 è¾“å‡ºç¤ºä¾‹

```json
{
  "asset": "BTC",
  "signal": "LONG",
  "signal_strength": 0.85,
  "confidence": 0.8,
  "reasoning": "BTCåœ¨60åˆ†é’Ÿè¶‹åŠ¿çº¿ä¸Šæ–¹,15åˆ†é’ŸEMAé‡‘å‰,MACDæŸ±çŠ¶å›¾è½¬æ­£,æˆäº¤é‡æ”¾å¤§,æŠ€æœ¯å½¢æ€å®Œæ•´",
  "indicators": {
    "ema_fast": 95234.5,
    "ema_slow": 94123.2,
    "ema_trend": 92000.0,
    "rsi": 58.3,
    "macd": 234.5,
    "macd_signal": 200.1,
    "macd_histogram": 34.4,
    "atr": 1200.5,
    "volume_ratio": 1.8
  },
  "entry_price": 95300.0,
  "suggested_stop_loss": 93100.0,  // åŸºäº2Ã—ATR
  "support_levels": [94000, 92000, 90000],
  "resistance_levels": [96000, 98000, 100000]
}
```

### 3.3 MomentumRegimeDecision (åŠ¨é‡åˆ¶åº¦å†³ç­–å¼•æ“)

#### 3.3.1 èŒè´£å®šä¹‰

**æ ¸å¿ƒä»»åŠ¡**: æ•´åˆRegimeFilterAgentå’ŒTAMomentumAgentçš„è¾“å‡º,ç”Ÿæˆæœ€ç»ˆäº¤æ˜“å†³ç­–

**å†³ç­–æµç¨‹** (â­ ä¿®æ­£ç‰ˆ - æŠ€æœ¯åˆ†æä¸»å¯¼):

```
Step 1: TAMomentumAgentç”ŸæˆæŠ€æœ¯ä¿¡å· (ä¸»å¯¼å†³ç­–)

  å¯¹æ¯ä¸ªå¸ç§(BTC/ETH/SOL):
    â†’ åˆ†æ15åˆ†é’Ÿå’Œ60åˆ†é’ŸæŠ€æœ¯æŒ‡æ ‡
    â†’ è¾“å‡º: signal (LONG/SHORT/NEUTRAL), signal_strength (0-1)
  
  â­ å¦‚æœ signal = NEUTRAL â†’ ç›´æ¥è·³è¿‡è¯¥å¸ç§,ä¸äº¤æ˜“

Step 2: RegimeFilterAgentè¯„ä¼°å¸‚åœºç¯å¢ƒ (è¾…åŠ©ç¡®è®¤)

  â†’ ç»¼åˆå®è§‚/æƒ…ç»ª/è¡ç”Ÿå“æ•°æ®
  â†’ è¾“å‡º: Regime Score (0-100)
  
  â­ Regimeä¸å†³å®š"æ˜¯å¦äº¤æ˜“",åªå†³å®š"äº¤æ˜“å¼ºåº¦"

Step 3: ä¿¡å·ç¡®è®¤æ£€æŸ¥ (é¿å…æç«¯é€†åŠ¿)

  å¯¹äºæ¯ä¸ªæœ‰æŠ€æœ¯ä¿¡å·çš„å¸ç§:
  
  3.1 å¤šå¤´ä¿¡å· + æåº¦æ¶åŠ£ç¯å¢ƒ:
    if signal = LONG and Regime Score < 15:
      â†’ âš ï¸ é£é™©è­¦å‘Š: "æŠ€æœ¯çœ‹å¤šä½†å®è§‚æåº¦å±é™©,å»ºè®®è·³è¿‡æˆ–æå°ä»“ä½"
      â†’ å¯é€‰: è·³è¿‡äº¤æ˜“ OR ç»§ç»­ä½†é™ä½ä»“ä½è‡³0.3x
  
  3.2 ç©ºå¤´ä¿¡å· + æåº¦å¥åº·ç¯å¢ƒ:
    if signal = SHORT and Regime Score > 85:
      â†’ âš ï¸ é£é™©è­¦å‘Š: "æŠ€æœ¯çœ‹ç©ºä½†å®è§‚æåº¦å¥åº·,å»ºè®®è·³è¿‡æˆ–æå°ä»“ä½"
      â†’ å¯é€‰: è·³è¿‡äº¤æ˜“ OR ç»§ç»­ä½†é™ä½ä»“ä½è‡³0.3x
  
  3.3 å…¶ä»–æƒ…å†µ:
    â†’ âœ… é€šè¿‡ç¡®è®¤,è¿›å…¥å‚æ•°è°ƒåˆ¶

Step 4: æ ¹æ®TAä¿¡å·å¼ºåº¦å’ŒRegime Scoreè®¡ç®—æœ€ç»ˆå‚æ•° (æŠ€æœ¯ä¸ºä¸»,Regimeä¸ºè¾…)

  Base Parameters (åŸºç¡€å‚æ•°):
    - Base_Risk_Pct = 0.5%  // å•ç¬”é£é™©å èµ„é‡‘çš„ç™¾åˆ†æ¯”
    - Base_Leverage = 3x     // åŸºç¡€æ æ†
    - Base_TP_RR = 2.0       // é£é™©å›æŠ¥æ¯” (æ­¢ç›ˆè·ç¦»/æ­¢æŸè·ç¦»)
  
  Effective Parameters (â­ æ–°é€»è¾‘ - æŠ€æœ¯ä¿¡å·å¼ºåº¦ä¸ºä¸»,Regimeä¸ºè¾…):
  
  4.1 è®¡ç®—æŠ€æœ¯åˆ†æåŸºç¡€ä»“ä½:
    TA_Base_Position = Base_Risk_Pct Ã— TA_Signal_Strength
    
    ä¾‹å¦‚:
    - TA_Signal_Strength = 0.6 â†’ TA_Base = 0.5% Ã— 0.6 = 0.3%
    - TA_Signal_Strength = 0.85 â†’ TA_Base = 0.5% Ã— 0.85 = 0.425%
    - TA_Signal_Strength = 1.0 â†’ TA_Base = 0.5% Ã— 1.0 = 0.5%
  
  4.2 è®¡ç®—Regimeè°ƒåˆ¶ç³»æ•° (ä»…åšæ”¾å¤§/ç¼©å°):
    Regime_Multiplier:
      - Regime Score < 20:   0.3x  (æåº¦å±é™©,å¤§å¹…å‡ä»“ä½†ä¸ç¦æ­¢)
      - 20 <= Score < 40:    0.6x  (å±é™©,å‡ä»“)
      - 40 <= Score < 60:    1.0x  (ä¸­æ€§,ä¸è°ƒæ•´)
      - 60 <= Score < 80:    1.3x  (å¥åº·,åŠ ä»“)
      - Score >= 80:         1.6x  (æåº¦å¥åº·,å¤§å¹…åŠ ä»“)
  
  4.3 è®¡ç®—æœ€ç»ˆæœ‰æ•ˆå‚æ•°:
    Effective_Risk_Pct = TA_Base_Position Ã— Regime_Multiplier
    Effective_Leverage = Base_Leverage Ã— sqrt(Regime_Multiplier)  // æ æ†ç”¨å¹³æ–¹æ ¹,å˜åŒ–æ›´å¹³æ»‘
    Effective_TP_RR = Base_TP_RR Ã— (1 + 0.2 Ã— (Regime_Multiplier - 1))
  
  ç¤ºä¾‹è®¡ç®—:
    TA_Signal_Strength = 0.85, Regime Score = 75
    â†’ TA_Base = 0.5% Ã— 0.85 = 0.425%
    â†’ Regime_Multiplier = 1.3x
    â†’ Effective_Risk = 0.425% Ã— 1.3 = 0.5525%
    â†’ Effective_Leverage = 3 Ã— sqrt(1.3) â‰ˆ 3.42x
    â†’ Effective_TP_RR = 2.0 Ã— (1 + 0.2Ã—0.3) = 2.12

Step 5: è®¡ç®—å…·ä½“çš„äº¤æ˜“å‚æ•° (â­ å¼ºåˆ¶æ­¢ç›ˆæ­¢æŸ)

  å¯¹äºæ¯ä¸ªå¸ç§çš„LONGä¿¡å·:
  
  5.1 è®¡ç®—é£é™©é‡‘é¢:
     R = Total_Equity Ã— Effective_Risk_Pct
     ä¾‹å¦‚: $10,000 Ã— 0.5525% = $55.25
  
  5.2 è®¡ç®—æ­¢æŸè·ç¦» (åŸºäºATR):
     SL_Distance = ATR Ã— ATR_Multiplier  // é»˜è®¤2.0å€
     ä¾‹å¦‚: 1200 Ã— 2.0 = 2400
  
  5.3 è®¡ç®—ä»“ä½å¤§å°:
     Position_Size = (R Ã— Effective_Leverage) / SL_Distance
     ä¾‹å¦‚: ($55.25 Ã— 3.42) / 2400 = 0.0787 BTC
  
  5.4 âœ… è®¡ç®—æ­¢æŸä»·æ ¼ (å¼ºåˆ¶è®¾ç½®):
     For LONG: Stop_Loss = Entry_Price - SL_Distance
     For SHORT: Stop_Loss = Entry_Price + SL_Distance
     ä¾‹å¦‚: 95300 - 2400 = 92900
  
  5.5 âœ… è®¡ç®—æ­¢ç›ˆä»·æ ¼ (å¼ºåˆ¶è®¾ç½®):
     For LONG: Take_Profit = Entry_Price + (SL_Distance Ã— Effective_TP_RR)
     For SHORT: Take_Profit = Entry_Price - (SL_Distance Ã— Effective_TP_RR)
     ä¾‹å¦‚: 95300 + (2400 Ã— 2.12) = 100388
  
  5.6 â­ ç”ŸæˆOCOè®¢å• (One-Cancels-Other):
     {
       "order_type": "MARKET",  // å¸‚ä»·å…¥åœº
       "entry_price": 95300.0,
       "position_size": 0.0787,
       "leverage": 3.42,
       "oco_orders": [  // å¿…é¡»åŒæ—¶è®¾ç½®
         {
           "type": "STOP_LOSS",
           "price": 92900.0,
           "trigger": "mark_price"  // ä½¿ç”¨æ ‡è®°ä»·æ ¼è§¦å‘,é˜²æ­¢æ’é’ˆ
         },
         {
           "type": "TAKE_PROFIT",
           "price": 100388.0,
           "trigger": "last_price"
         }
       ]
     }
  
  âš ï¸ ç¡¬æ€§è¦æ±‚:
    - æ²¡æœ‰æ­¢æŸæ­¢ç›ˆçš„è®¢å• â†’ ç³»ç»Ÿæ‹’ç»æ‰§è¡Œ
    - æ­¢æŸè·ç¦» < 0.5% â†’ é£é™©è­¦å‘Š
    - æ­¢æŸè·ç¦» > 10% â†’ å‚æ•°å¼‚å¸¸è­¦å‘Š

Step 6: é£æ§æ£€æŸ¥ (å¤šé‡ä¿é™©)

  6.1 ä»“ä½é™åˆ¶:
    - å•ç¬”ä»“ä½ä¸è¶…è¿‡æ€»èµ„é‡‘çš„5% (æœ€å¤§é£æ§)
    - æ‰€æœ‰å¸ç§æ€»ä»“ä½ä¸è¶…è¿‡æ€»èµ„é‡‘çš„80%
    - å•ä¸ªå¸ç§æœ€å¤§æ æ†: 5x
    - åŒæ—¶æŒä»“å¸ç§æ•°é‡: â‰¤3ä¸ª
  
  6.2 æ­¢æŸæ­¢ç›ˆéªŒè¯:
    âœ… Stop_Loss å¿…é¡»å­˜åœ¨ä¸”æœ‰æ•ˆ
    âœ… Take_Profit å¿…é¡»å­˜åœ¨ä¸”æœ‰æ•ˆ
    âœ… æ­¢æŸè·ç¦»åœ¨åˆç†èŒƒå›´ (0.5%-10%)
    âœ… é£é™©å›æŠ¥æ¯” >= 1.5
  
  6.3 è®¢å•ç±»å‹éªŒè¯:
    âœ… å¿…é¡»ä½¿ç”¨OCOè®¢å•
    âœ… æ­¢æŸä½¿ç”¨æ ‡è®°ä»·æ ¼è§¦å‘ (é˜²æ­¢æ’é’ˆ)
    âœ… æ­¢ç›ˆä½¿ç”¨æœ€æ–°ä»·æ ¼è§¦å‘

Step 7: ç”Ÿæˆäº¤æ˜“æŒ‡ä»¤

  è¾“å‡ºæ¯ä¸ªå¸ç§çš„äº¤æ˜“å†³ç­– (åŒ…å«å¼ºåˆ¶çš„SL/TP)
```

#### 3.3.2 è¾“å‡ºç¤ºä¾‹

```json
{
  "regime_score": 72.5,
  "regime_mode": "HEALTHY",  // å¥åº·ç¯å¢ƒ,å¢å¼ºä»“ä½
  "timestamp": "2025-11-13T10:15:00Z",
  
  "decisions": {
    "BTC": {
      "signal": "BUY",
      "should_execute": true,
      
      // â­ æŠ€æœ¯åˆ†æä¸»å¯¼
      "ta_signal": "LONG",
      "ta_signal_strength": 0.85,  // æŠ€æœ¯ä¿¡å·å¾ˆå¼º
      "ta_reasoning": "15åˆ†é’ŸEMAé‡‘å‰,60åˆ†é’Ÿè¶‹åŠ¿å‘ä¸Š,MACDæŸ±çŠ¶å›¾è½¬æ­£,RSIå¥åº·(58),æˆäº¤é‡ç¡®è®¤",
      
      // â­ Regimeè¾…åŠ©å¢å¼º
      "regime_multiplier": 1.3,  // Regime Score 75 â†’ å¢å¼ºä»“ä½30%
      "regime_reasoning": "å®è§‚æµåŠ¨æ€§æ”¹å–„,å¸‚åœºæƒ…ç»ªä¹è§‚(FG=65),è¡ç”Ÿå“å¥åº·",
      
      // æœ€ç»ˆäº¤æ˜“å‚æ•°
      "entry_price": 95300.0,
      "position_size": 0.0787,  // BTC (ç”±TAå¼ºåº¦0.85è®¡ç®—,Regimeå¢å¼º1.3x)
      "position_value_usd": 7502.1,
      "leverage": 3.42,
      
      // âœ… å¼ºåˆ¶æ­¢ç›ˆæ­¢æŸ
      "stop_loss": 92900.0,  // åŸºäº2Ã—ATR
      "take_profit": 100388.0,  // RR=2.12
      "risk_usd": 55.25,
      "risk_pct": 0.5525,
      "tp_rr_ratio": 2.12,
      "sl_distance_pct": 2.52,
      
      // OCOè®¢å•
      "order_type": "OCO",
      "oco_orders": [
        {"type": "STOP_LOSS", "price": 92900.0, "trigger": "mark_price"},
        {"type": "TAKE_PROFIT", "price": 100388.0, "trigger": "last_price"}
      ],
      
      "warnings": []
    },
    
    "ETH": {
      "signal": "HOLD",
      "should_execute": false,
      "reasoning": "ETHæŠ€æœ¯ä¿¡å·ä¸­æ€§,æš‚ä¸å¼€ä»“",
      "warnings": []
    },
    
    "SOL": {
      "signal": "BUY",
      "should_execute": true,
      
      // â­ æŠ€æœ¯åˆ†æä¸»å¯¼
      "ta_signal": "LONG",
      "ta_signal_strength": 0.75,  // æŠ€æœ¯ä¿¡å·è¾ƒå¼º
      "ta_reasoning": "EMAé‡‘å‰,MACDæ­£å€¼,ä½†RSIç•¥é«˜(65),æˆäº¤é‡æ­£å¸¸",
      
      // â­ Regimeè¾…åŠ©å¢å¼º
      "regime_multiplier": 1.3,
      "regime_reasoning": "ä¸BTCç›¸åŒçš„å¥åº·Regimeç¯å¢ƒ",
      
      // æœ€ç»ˆäº¤æ˜“å‚æ•°
      "entry_price": 154.5,
      "position_size": 14.8,  // SOL
      "position_value_usd": 2286.6,
      "leverage": 3.42,
      
      // âœ… å¼ºåˆ¶æ­¢ç›ˆæ­¢æŸ
      "stop_loss": 149.2,  // åŸºäº2Ã—ATR
      "take_profit": 165.72,  // RR=2.12
      "risk_usd": 48.75,
      "risk_pct": 0.4875,
      "tp_rr_ratio": 2.12,
      "sl_distance_pct": 3.43,
      
      // OCOè®¢å•
      "order_type": "OCO",
      "oco_orders": [
        {"type": "STOP_LOSS", "price": 149.2, "trigger": "mark_price"},
        {"type": "TAKE_PROFIT", "price": 165.72, "trigger": "last_price"}
      ],
      
      "warnings": ["SOLæ³¢åŠ¨ç‡è¾ƒé«˜,æ­¢æŸè·ç¦»3.43%"]
    }
  },
  
  "portfolio_summary": {
    "total_risk_usd": 104.0,  // 55.25 + 48.75
    "total_risk_pct": 1.04,
    "total_exposure_pct": 97.9,  // (7502.1 + 2286.6) / 10000 â‰ˆ 97.9%
    "open_positions_count": 2,
    "risk_checks_passed": true,
    
    // â­ å†³ç­–æƒé‡è¯´æ˜
    "decision_breakdown": {
      "technical_analysis_weight": 0.80,  // æŠ€æœ¯åˆ†æä¸»å¯¼
      "regime_confirmation_weight": 0.20,  // Regimeè¾…åŠ©
      "primary_driver": "TECHNICAL_SIGNALS",
      "regime_role": "CONFIRMATION_AND_AMPLIFICATION"
    },
    
    // é£æ§éªŒè¯
    "risk_controls": {
      "all_positions_have_sl_tp": true,  // âœ… æ‰€æœ‰ä»“ä½éƒ½æœ‰æ­¢æŸæ­¢ç›ˆ
      "max_leverage_check": "PASS",  // æœ€å¤§æ æ†3.42 < 5.0
      "max_exposure_check": "WARNING",  // æ€»ä»“ä½97.9%æ¥è¿‘ä¸Šé™80% (éœ€æ³¨æ„)
      "position_count_check": "PASS"  // 2ä¸ªå¸ç§ < 3ä¸ªä¸Šé™
    }
  }
}
```

### 3.4 æŒä»“ç®¡ç†é€»è¾‘

```python
æŒä»“ç®¡ç†è§„åˆ™:

1. åˆå§‹æ­¢æŸ: å›ºå®šåœ¨Entry - (ATR Ã— 2.0)

2. åŠ¨æ€å°¾éšæ­¢æŸ (Trailing Stop):
   - å½“æµ®ç›ˆè¾¾åˆ°1R (1å€é£é™©è·ç¦»):
     ç§»åŠ¨æ­¢æŸåˆ°Entry (ä¿æœ¬)
   
   - å½“æµ®ç›ˆè¾¾åˆ°1.5R:
     ç§»åŠ¨æ­¢æŸåˆ°Entry + 0.5R (é”å®šéƒ¨åˆ†åˆ©æ¶¦)
   
   - å½“æµ®ç›ˆè¾¾åˆ°2R (æ­¢ç›ˆç›®æ ‡):
     ç§»åŠ¨æ­¢æŸåˆ°Entry + 1.5R (é”å®šå¤§éƒ¨åˆ†åˆ©æ¶¦,ç•™å°å°¾å·´)

3. æ—¶é—´æ­¢æŸ:
   - æŒä»“è¶…è¿‡24å°æ—¶æœªè¾¾åˆ°æ­¢ç›ˆ:
     è¯„ä¼°æ˜¯å¦æ‰‹åŠ¨å¹³ä»“

4. Regimeæ¶åŒ–æ­¢æŸ:
   - æŒä»“æœŸé—´Regime Scoreä»>70è·Œè‡³<40:
     è§¦å‘é¢„è­¦,è€ƒè™‘æå‰æ­¢ç›ˆ/å‡ä»“

5. åˆ†æ‰¹æ­¢ç›ˆ (å¯é€‰):
   - è¾¾åˆ°1.5R: æ­¢ç›ˆ50%ä»“ä½
   - è¾¾åˆ°2.5R: æ­¢ç›ˆå‰©ä½™50%
```

---

## å››ã€æ•°æ®æµè®¾è®¡

### 4.1 æ•°æ®é‡‡é›†éœ€æ±‚

```python
# éœ€è¦é‡‡é›†çš„æ•°æ®

1. ä»·æ ¼æ•°æ® (15åˆ†é’ŸKçº¿) - Binance API
   - BTC/USDT: æœ€è¿‘200æ ¹Kçº¿ (50å°æ—¶å†å²)
   - ETH/USDT: æœ€è¿‘200æ ¹Kçº¿
   - SOL/USDT: æœ€è¿‘200æ ¹Kçº¿
   
   - 60åˆ†é’ŸKçº¿: æœ€è¿‘200æ ¹ (200å°æ—¶ â‰ˆ 8å¤©)

2. å®è§‚æ•°æ® - FRED API + CoinGlass
   - ETFå‡€æµå…¥ (æ—¥é¢‘): æœ€è¿‘7å¤©
   - DXYç¾å…ƒæŒ‡æ•°: æœ€æ–°å€¼
   - é™æ¯æ¦‚ç‡: æœ€æ–°å€¼

3. å¸‚åœºæƒ…ç»ª - Alternative.me
   - Fear & Greed Index: æœ€æ–°å€¼

4. è¡ç”Ÿå“æ•°æ® - Binance Futures API
   - èµ„é‡‘è´¹ç‡ (BTC/ETH/SOL): æœ€æ–°8å°æ—¶å‡å€¼
   - æŒä»“é‡å˜åŒ–: æœ€è¿‘24å°æ—¶å˜åŒ–ç‡
   - æœŸè´§æº¢ä»·ç‡: (æœŸè´§ä»·æ ¼ - ç°è´§ä»·æ ¼) / ç°è´§ä»·æ ¼

5. é“¾ä¸Šæ•°æ® - Blockchain.info (å¯é€‰)
   - MVRV Z-Score: æœ€æ–°å€¼ (æ—¥é¢‘)
```

### 4.2 æ•°æ®æ›´æ–°é¢‘ç‡

| æ•°æ®ç±»å‹ | æ›´æ–°é¢‘ç‡ | ç¼“å­˜æ—¶é•¿ |
|---------|---------|---------|
| 15åˆ†é’ŸKçº¿ | æ¯15åˆ†é’Ÿ | 15åˆ†é’Ÿ |
| 60åˆ†é’ŸKçº¿ | æ¯60åˆ†é’Ÿ | 60åˆ†é’Ÿ |
| èµ„é‡‘è´¹ç‡ | æ¯å°æ—¶ | 1å°æ—¶ |
| å®è§‚æ•°æ® | æ¯æ—¥ | 4å°æ—¶ |
| Fear & Greed | æ¯æ—¥ | 4å°æ—¶ |
| MVRV | æ¯æ—¥ | 24å°æ—¶ |

### 4.3 æ•°æ®æœåŠ¡æ¥å£

```python
# app/services/data_collectors/momentum_data_service.py

class MomentumDataService:
    """åŠ¨é‡ç­–ç•¥ä¸“ç”¨æ•°æ®æœåŠ¡"""
    
    async def collect_for_momentum_strategy(
        self,
        assets: List[str] = ["BTC", "ETH", "SOL"]
    ) -> Dict[str, Any]:
        """
        é‡‡é›†åŠ¨é‡ç­–ç•¥æ‰€éœ€çš„å…¨éƒ¨æ•°æ®
        
        Returns:
            {
                "timestamp": "2025-11-13T10:15:00Z",
                "assets": {
                    "BTC": {
                        "price": 95300.0,
                        "ohlcv_15m": [...],  // 200æ ¹
                        "ohlcv_60m": [...],  // 200æ ¹
                        "volume_24h": 28000000000,
                        "price_change_24h": 2.3,
                        "funding_rate": 0.0001,
                        "open_interest_change_24h": 5.2,
                        "futures_premium": 0.15
                    },
                    "ETH": {...},
                    "SOL": {...}
                },
                "macro": {
                    "etf_flow_7d": [100, 200, -50, 150, 300, 250, 400],
                    "dxy": 103.5,
                    "fed_rate_cut_prob": 65.0
                },
                "sentiment": {
                    "fear_greed_value": 65,
                    "fear_greed_classification": "Greed"
                },
                "onchain": {
                    "btc_mvrv_zscore": 2.5
                }
            }
        """
        pass
```

---

## äº”ã€å®æ–½è®¡åˆ’

### 5.1 å¼€å‘ä»»åŠ¡åˆ†è§£

#### Phase 1: æ•°æ®å±‚ (1-2å¤©)

**ä»»åŠ¡**:
- [ ] åˆ›å»º `MomentumDataService` ç±»
- [ ] å¯¹æ¥Binance Futures APIè·å–èµ„é‡‘è´¹ç‡ã€æŒä»“é‡
- [ ] å®ç°15åˆ†é’Ÿå’Œ60åˆ†é’ŸKçº¿æ•°æ®é‡‡é›†
- [ ] å®ç°å¤šå¸ç§(BTC/ETH/SOL)å¹¶è¡Œæ•°æ®é‡‡é›†
- [ ] æ·»åŠ æœŸè´§æº¢ä»·ç‡è®¡ç®—é€»è¾‘
- [ ] ç¼–å†™æ•°æ®é‡‡é›†å•å…ƒæµ‹è¯•

**äº¤ä»˜ç‰©**:
- `app/services/data_collectors/momentum_data_service.py`
- `tests/unit/test_momentum_data_service.py`

**éªŒæ”¶æ ‡å‡†**:
```python
# æµ‹è¯•ä»£ç 
data = await momentum_data_service.collect_for_momentum_strategy()
assert "BTC" in data["assets"]
assert len(data["assets"]["BTC"]["ohlcv_15m"]) == 200
assert "funding_rate" in data["assets"]["BTC"]
```

---

#### Phase 2: RegimeFilterAgent (2-3å¤©)

**ä»»åŠ¡**:
- [ ] åˆ›å»º `RegimeFilterAgent` ç±» (`app/agents/regime_filter_agent.py`)
- [ ] å®ç°å¤šç»´åº¦æŒ‡æ ‡é¢„å¤„ç†å’Œæ ‡å‡†åŒ–
- [ ] å®ç°åŠ æƒæ±‡æ€»å’ŒRegime Scoreè®¡ç®—
- [ ] è®¾è®¡LLM Prompt (å¯é€‰å¢å¼º)
- [ ] å®ç°è¾“å‡ºè§£æå’ŒéªŒè¯
- [ ] ç¼–å†™Agentå•å…ƒæµ‹è¯•

**æ ¸å¿ƒä»£ç ç»“æ„**:
```python
# app/agents/regime_filter_agent.py

class RegimeFilterAgent:
    """
    å¸‚åœºåˆ¶åº¦è¿‡æ»¤å™¨Agent
    
    èŒè´£: ç»¼åˆè¯„ä¼°å¸‚åœºç¯å¢ƒ,è¾“å‡ºRegime Score (0-100)
    """
    
    # æŒ‡æ ‡æƒé‡é…ç½®
    WEIGHTS = {
        "etf_flow": 0.25,
        "dxy": 0.10,
        "fed_rate": 0.10,
        "fear_greed": 0.20,
        "funding_rate": 0.15,
        "open_interest": 0.10,
        "futures_premium": 0.05,
        "mvrv": 0.05
    }
    
    async def analyze(self, market_data: Dict[str, Any]) -> RegimeFilterOutput:
        """
        åˆ†æå¸‚åœºåˆ¶åº¦
        
        Args:
            market_data: å¸‚åœºæ•°æ®å¿«ç…§
        
        Returns:
            RegimeFilterOutputåŒ…å«:
            - regime_score: 0-100
            - regime_classification: BEARISH/NEUTRAL/BULLISH
            - confidence: 0-1
            - reasoning: æ–‡å­—è§£é‡Š
            - component_scores: å„ç»´åº¦åˆ†æ•°
        """
        # Step 1: é¢„å¤„ç†å„æŒ‡æ ‡
        normalized_scores = self._normalize_indicators(market_data)
        
        # Step 2: åŠ æƒæ±‡æ€»
        base_score = self._calculate_base_score(normalized_scores)
        
        # Step 3: LLMå¢å¼º (å¯é€‰)
        final_score = await self._llm_refine_score(
            base_score, 
            market_data, 
            normalized_scores
        )
        
        # Step 4: åˆ†ç±»å’Œè¾“å‡º
        return self._build_output(final_score, normalized_scores, market_data)
    
    def _normalize_indicators(self, data: Dict) -> Dict[str, float]:
        """å°†å„æŒ‡æ ‡æ ‡å‡†åŒ–åˆ°[-1, +1]"""
        pass
    
    def _calculate_base_score(self, scores: Dict[str, float]) -> float:
        """åŠ æƒæ±‡æ€»è®¡ç®—Base Score"""
        base = sum(scores[k] * self.WEIGHTS[k] for k in scores)
        return (base + 1) * 50  # å½’ä¸€åŒ–åˆ°[0, 100]
```

**äº¤ä»˜ç‰©**:
- `app/agents/regime_filter_agent.py`
- `app/schemas/agents.py` (æ·»åŠ RegimeFilterOutput)
- `tests/unit/test_regime_filter_agent.py`

**éªŒæ”¶æ ‡å‡†**:
- Regime Scoreåœ¨0-100èŒƒå›´å†…
- å„ä¸ªæç«¯å¸‚åœºæ¡ä»¶ä¸‹è¾“å‡ºåˆç†
- æµ‹è¯•è¦†ç›–ç‡>80%

---

#### Phase 3: TAMomentumAgent (2-3å¤©)

**ä»»åŠ¡**:
- [ ] åˆ›å»º `TAMomentumAgent` ç±»
- [ ] å®ç°15åˆ†é’Ÿå’Œ60åˆ†é’Ÿå¤šæ—¶é—´æ¡†æ¶åˆ†æ
- [ ] å®ç°åŠ¨é‡ä¿¡å·ç”Ÿæˆé€»è¾‘ (EMA/RSI/MACD/ATR/Volume)
- [ ] å®ç°å¤šå¸ç§å¹¶è¡Œåˆ†æ
- [ ] å®ç°ä¿¡å·å¼ºåº¦è®¡ç®—
- [ ] ç¼–å†™Agentå•å…ƒæµ‹è¯•

**æ ¸å¿ƒä»£ç ç»“æ„**:
```python
# app/agents/ta_momentum_agent.py

class TAMomentumAgent:
    """
    æŠ€æœ¯åŠ¨é‡åˆ†æAgent
    
    èŒè´£: å¯¹æ¯ä¸ªå¸ç§ç”ŸæˆåŠ¨é‡äº¤æ˜“ä¿¡å·
    """
    
    async def analyze_multi_asset(
        self, 
        market_data: Dict[str, Any]
    ) -> Dict[str, TAMomentumOutput]:
        """
        åˆ†æå¤šä¸ªå¸ç§
        
        Args:
            market_data: åŒ…å«BTC/ETH/SOLçš„æ•°æ®
        
        Returns:
            {
                "BTC": TAMomentumOutput(...),
                "ETH": TAMomentumOutput(...),
                "SOL": TAMomentumOutput(...)
            }
        """
        results = {}
        for asset in ["BTC", "ETH", "SOL"]:
            results[asset] = await self.analyze_single_asset(
                asset, 
                market_data["assets"][asset]
            )
        return results
    
    async def analyze_single_asset(
        self, 
        asset: str, 
        asset_data: Dict
    ) -> TAMomentumOutput:
        """
        åˆ†æå•ä¸ªå¸ç§
        
        Returns:
            TAMomentumOutputåŒ…å«:
            - signal: LONG/SHORT/NEUTRAL
            - signal_strength: 0-1
            - confidence: 0-1
            - indicators: å„æŒ‡æ ‡å€¼
            - suggested_stop_loss: å»ºè®®æ­¢æŸä»·
            - reasoning: æ–‡å­—è§£é‡Š
        """
        # Step 1: è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
        indicators = self._calculate_indicators(asset_data)
        
        # Step 2: æ£€æŸ¥ä¿¡å·æ¡ä»¶
        signal_result = self._check_signal_conditions(indicators)
        
        # Step 3: è®¡ç®—ä¿¡å·å¼ºåº¦
        strength = self._calculate_signal_strength(signal_result, indicators)
        
        # Step 4: è®¡ç®—æ­¢æŸä½
        stop_loss = self._calculate_stop_loss(
            asset_data["price"], 
            indicators["atr"], 
            signal_result["signal"]
        )
        
        return TAMomentumOutput(...)
    
    def _check_signal_conditions(self, ind: Dict) -> Dict:
        """
        æ£€æŸ¥LONG/SHORTä¿¡å·æ¡ä»¶
        
        LONGæ¡ä»¶:
        - price > ema_trend_60m
        - ema_fast_15m > ema_slow_15m
        - macd > macd_signal and histogram > 0
        
        è¾…åŠ©æ¡ä»¶:
        - 30 < rsi < 70
        - volume > 1.5 * ma_volume
        """
        pass
```

**äº¤ä»˜ç‰©**:
- `app/agents/ta_momentum_agent.py`
- `app/schemas/agents.py` (æ·»åŠ TAMomentumOutput)
- `tests/unit/test_ta_momentum_agent.py`

---

#### Phase 4: MomentumRegimeDecision (3-4å¤©)

**ä»»åŠ¡**:
- [ ] åˆ›å»º `MomentumRegimeDecision` å†³ç­–å¼•æ“
- [ ] å®ç°Regime Score â†’ å‚æ•°è°ƒåˆ¶é€»è¾‘
- [ ] å®ç°å¤šå¸ç§äº¤æ˜“å†³ç­–ç”Ÿæˆ
- [ ] å®ç°ä»“ä½å’Œé£é™©è®¡ç®—
- [ ] å®ç°é£æ§æ£€æŸ¥ (æœ€å¤§ä»“ä½/æ æ†/å¸ç§æ•°)
- [ ] å®ç°æŒä»“ç®¡ç†é€»è¾‘ (å°¾éšæ­¢æŸ/æ—¶é—´æ­¢æŸ)
- [ ] ç¼–å†™å†³ç­–å¼•æ“æµ‹è¯•

**æ ¸å¿ƒä»£ç ç»“æ„**:
```python
# app/decision_agents/momentum_regime_decision.py

class MomentumRegimeDecision(BaseDecisionAgent):
    """
    åŠ¨é‡åˆ¶åº¦å†³ç­–å¼•æ“
    
    èŒè´£: æ•´åˆRegimeFilterå’ŒTAMomentum,ç”Ÿæˆæœ€ç»ˆäº¤æ˜“å†³ç­–
    """
    
    def decide(
        self,
        agent_outputs: Dict[str, Any],
        market_data: Dict[str, Any],
        instance_params: Dict[str, Any],
        current_positions: Dict[str, Dict] = None,
    ) -> Dict[str, Any]:
        """
        ç”Ÿæˆäº¤æ˜“å†³ç­– (â­ æŠ€æœ¯åˆ†æä¸»å¯¼)
        
        Args:
            agent_outputs: {
                "regime": RegimeFilterOutput,  # è¾…åŠ©ç¡®è®¤
                "ta_momentum": {               # â­ ä¸»å¯¼å†³ç­–
                    "BTC": TAMomentumOutput,
                    "ETH": TAMomentumOutput,
                    "SOL": TAMomentumOutput
                }
            }
            market_data: å¸‚åœºæ•°æ®
            instance_params: ç­–ç•¥å®ä¾‹å‚æ•° (åŒ…å«Base_Risk_Pctç­‰)
            current_positions: å½“å‰æŒä»“çŠ¶æ€
        
        Returns:
            {
                "regime_score": 72.5,
                "regime_mode": "HEALTHY",
                "decisions": {
                    "BTC": {
                        "ta_signal_strength": 0.85,  # â­ æŠ€æœ¯ä¸»å¯¼
                        "regime_multiplier": 1.3,    # Regimeå¢å¼º
                        "stop_loss": ...,            # âœ… å¼ºåˆ¶
                        "take_profit": ...,          # âœ… å¼ºåˆ¶
                        ...
                    },
                    ...
                },
                "portfolio_summary": {...}
            }
        """
        regime = agent_outputs["regime"]
        ta_signals = agent_outputs["ta_momentum"]
        
        # Step 1: å¯¹æ¯ä¸ªå¸ç§ç”Ÿæˆå†³ç­– (â­ TAä¿¡å·ä¸»å¯¼)
        decisions = {}
        for asset, ta_output in ta_signals.items():
            # 1.1 æ£€æŸ¥æŠ€æœ¯ä¿¡å·
            if ta_output.signal == "NEUTRAL":
                decisions[asset] = self._create_hold_decision(asset, "æŠ€æœ¯ä¿¡å·ä¸­æ€§")
                continue
            
            # 1.2 æç«¯é€†åŠ¿æ£€æŸ¥ (Regimeè¾…åŠ©è¿‡æ»¤)
            if self._is_extreme_counter_trend(ta_output.signal, regime.regime_score):
                decisions[asset] = self._create_hold_decision(
                    asset, 
                    f"æŠ€æœ¯{ta_output.signal}ä½†Regimeæç«¯é€†åŠ¿,è·³è¿‡"
                )
                continue
            
            # 1.3 è®¡ç®—Regimeè°ƒåˆ¶ç³»æ•°
            regime_multiplier = self._calculate_regime_multiplier(regime.regime_score)
            
            # 1.4 ç”Ÿæˆäº¤æ˜“å†³ç­– (â­ TAä¸ºåŸºç¡€,Regimeè°ƒåˆ¶)
            decision = self._generate_asset_decision(
                asset,
                ta_output,
                regime_multiplier,
                instance_params,
                market_data,
                current_positions.get(asset)
            )
            decisions[asset] = decision
        
        # Step 2: é£æ§æ£€æŸ¥ (åŒ…æ‹¬å¼ºåˆ¶SL/TPéªŒè¯)
        self._risk_check(decisions, instance_params)
        
        # Step 3: ç”Ÿæˆç»„åˆæ‘˜è¦
        summary = self._generate_portfolio_summary(decisions, regime)
        
        return {
            "regime_score": regime.regime_score,
            "regime_mode": self._classify_regime_mode(regime.regime_score),
            "decisions": decisions,
            "portfolio_summary": summary
        }
    
    def _is_extreme_counter_trend(self, ta_signal: str, regime_score: float) -> bool:
        """
        æ£€æŸ¥æ˜¯å¦ä¸ºæç«¯é€†åŠ¿ (Regimeè¾…åŠ©è¿‡æ»¤æç«¯æƒ…å†µ)
        
        Returns:
            True: æç«¯é€†åŠ¿,å»ºè®®è·³è¿‡
            False: å¯ä»¥ç»§ç»­äº¤æ˜“
        """
        # åšå¤šä½†å®è§‚æåº¦å±é™©
        if ta_signal == "LONG" and regime_score < 15:
            return True
        
        # åšç©ºä½†å®è§‚æåº¦å¥åº·
        if ta_signal == "SHORT" and regime_score > 85:
            return True
        
        return False
    
    def _calculate_regime_multiplier(self, regime_score: float) -> float:
        """
        è®¡ç®—Regimeè°ƒåˆ¶ç³»æ•° (â­ ä»…åšæ”¾å¤§/ç¼©å°,ä¸é˜»æ­¢äº¤æ˜“)
        
        Returns:
            0.3x ~ 1.6xçš„è°ƒåˆ¶ç³»æ•°
        """
        if regime_score < 20:
            return 0.3  # æåº¦å±é™©,å¤§å¹…å‡ä»“ä½†ä¸ç¦æ­¢
        elif regime_score < 40:
            return 0.6  # å±é™©,å‡ä»“
        elif regime_score < 60:
            return 1.0  # ä¸­æ€§,ä¸è°ƒæ•´
        elif regime_score < 80:
            return 1.3  # å¥åº·,åŠ ä»“
        else:  # >= 80
            return 1.6  # æåº¦å¥åº·,å¤§å¹…åŠ ä»“
    
    def _generate_asset_decision(
        self,
        asset: str,
        ta_output: TAMomentumOutput,
        effective_params: Dict,
        market_data: Dict,
        current_position: Optional[Dict]
    ) -> Dict:
        """
        ä¸ºå•ä¸ªå¸ç§ç”Ÿæˆäº¤æ˜“å†³ç­–
        
        Returns:
            {
                "signal": "BUY",
                "should_execute": True,
                "entry_price": 95300.0,
                "position_size": 0.0625,
                "leverage": 3.9,
                "stop_loss": 92900.0,
                "take_profit": 100100.0,
                "risk_usd": 50.0,
                "reasoning": "...",
                "warnings": [...]
            }
        """
        # å¦‚æœæš‚åœå¼€ä»“
        if effective_params["risk_pct"] == 0:
            return self._manage_existing_position(asset, current_position)
        
        # å¦‚æœæ²¡æœ‰æŠ€æœ¯ä¿¡å·
        if ta_output.signal == "NEUTRAL":
            return {
                "signal": "HOLD",
                "should_execute": False,
                "reasoning": f"{asset}æŠ€æœ¯ä¿¡å·ä¸­æ€§,æš‚ä¸äº¤æ˜“"
            }
        
        # è®¡ç®—äº¤æ˜“å‚æ•°
        return self._calculate_trade_params(
            asset, ta_output, effective_params, market_data
        )
```

**äº¤ä»˜ç‰©**:
- `app/decision_agents/momentum_regime_decision.py`
- `tests/unit/test_momentum_regime_decision.py`

---

#### Phase 5: ç­–ç•¥æ¨¡æ¿æ³¨å†Œ (1å¤©)

**ä»»åŠ¡**:
- [ ] åœ¨æ•°æ®åº“åˆ›å»ºç­–ç•¥æ¨¡æ¿è®°å½•
- [ ] ç¼–å†™ç­–ç•¥åˆå§‹åŒ–è„šæœ¬
- [ ] é…ç½®é»˜è®¤å‚æ•°
- [ ] æµ‹è¯•ç­–ç•¥æ¨¡æ¿åˆ›å»ºæµç¨‹

**ç­–ç•¥æ¨¡æ¿é…ç½®**:
```python
# scripts/init_momentum_strategy.py

momentum_strategy_definition = {
    "name": "momentum_regime_multiasset_v1",
    "display_name": "åŠ¨é‡åˆ¶åº¦å¤šå¸ç§ç­–ç•¥ v1",
    "description": "AIé©±åŠ¨çš„åˆ¶åº¦è¿‡æ»¤å™¨+è§„åˆ™åŒ–æŠ€æœ¯åˆ†æ,15åˆ†é’Ÿçº§åˆ«å¤šå¸ç§åŠ¨é‡äº¤æ˜“ç­–ç•¥",
    "philosophy": "æ™ºèƒ½åˆ¶åº¦è¿‡æ»¤ + ç²¾å‡†æŠ€æœ¯æ‰§è¡Œ",
    "tags": ["momentum", "multi-asset", "high-frequency"],
    "risk_level": "AGGRESSIVE",
    
    "business_agents": [
        "regime_filter",  # RegimeFilterAgent
        "ta_momentum"     # TAMomentumAgent
    ],
    
    "decision_agent_module": "app.decision_agents.momentum_regime_decision",
    "decision_agent_class": "MomentumRegimeDecision",
    
    "trade_channel": "binance_futures",  # åˆçº¦äº¤æ˜“
    "trade_symbols": ["BTC/USDT", "ETH/USDT", "SOL/USDT"],
    
    "rebalance_period_minutes": 15,  # 15åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
    
    "default_params": {
        # åŸºç¡€é£é™©å‚æ•°
        "base_risk_pct": 0.5,     # å•ç¬”é£é™©0.5%
        "base_leverage": 3.0,     # åŸºç¡€æ æ†3x
        "base_tp_rr": 2.0,        # é£é™©å›æŠ¥æ¯”2:1
        
        # ATRæ­¢æŸå‚æ•°
        "atr_multiplier": 2.0,    # æ­¢æŸ=ATRÃ—2
        
        # å°¾éšæ­¢æŸå‚æ•°
        "trailing_stop_enabled": True,
        "trailing_trigger_r": 1.0,  # æµ®ç›ˆ1Ræ—¶å¯åŠ¨å°¾éš
        "trailing_stop_r": 0.5,     # å°¾éšæ­¢æŸè·ç¦»0.5R
        
        # åˆ†æ‰¹æ­¢ç›ˆå‚æ•°
        "partial_tp_enabled": False,  # é»˜è®¤ä¸å¯ç”¨
        "partial_tp_1_r": 1.5,         # 1.5Ræ—¶æ­¢ç›ˆ50%
        "partial_tp_2_r": 2.5,         # 2.5Ræ—¶æ­¢ç›ˆå‰©ä½™50%
        
        # Regimeé˜ˆå€¼å‚æ•°
        "regime_defensive_threshold": 30,   # <30æš‚åœå¼€ä»“
        "regime_cautious_threshold": 50,    # 30-50è°¨æ…
        "regime_aggressive_threshold": 70,  # >=70æ¿€è¿›
        
        # é£æ§å‚æ•°
        "max_position_per_asset": 0.05,  # å•å¸ç§æœ€å¤§5%
        "max_total_exposure": 0.80,      # æ€»ä»“ä½æœ€å¤§80%
        "max_leverage": 5.0,             # æœ€å¤§æ æ†5x
        "max_concurrent_positions": 3,   # æœ€å¤šåŒæ—¶3ä¸ªå¸ç§
        
        # æŒ‡æ ‡æƒé‡ (RegimeFilter)
        "regime_weights": {
            "etf_flow": 0.25,
            "dxy": 0.10,
            "fed_rate": 0.10,
            "fear_greed": 0.20,
            "funding_rate": 0.15,
            "open_interest": 0.10,
            "futures_premium": 0.05,
            "mvrv": 0.05
        },
        
        # æŠ€æœ¯æŒ‡æ ‡å‚æ•°
        "ema_fast": 20,
        "ema_slow": 60,
        "ema_trend": 200,
        "rsi_period": 14,
        "macd_fast": 12,
        "macd_slow": 26,
        "macd_signal": 9,
        "atr_period": 14,
        "volume_ma": 20
    },
    
    "is_active": True
}
```

**äº¤ä»˜ç‰©**:
- `scripts/init_momentum_strategy.py`
- æ•°æ®åº“è®°å½•

---

#### Phase 6: é›†æˆæµ‹è¯• (2-3å¤©)

**ä»»åŠ¡**:
- [ ] ç¼–å†™ç«¯åˆ°ç«¯æµ‹è¯•è„šæœ¬
- [ ] æµ‹è¯•å®Œæ•´ç­–ç•¥æ‰§è¡Œæµç¨‹
- [ ] æµ‹è¯•å¤šå¸ç§å¹¶è¡Œäº¤æ˜“
- [ ] æµ‹è¯•å„ç§Regime Scoreåœºæ™¯
- [ ] æµ‹è¯•æŒä»“ç®¡ç†å’Œæ­¢æŸé€»è¾‘
- [ ] æµ‹è¯•é£æ§é™åˆ¶è§¦å‘
- [ ] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–

**æµ‹è¯•åœºæ™¯**:

```python
# tests/integration/test_momentum_strategy.py

async def test_full_strategy_execution():
    """æµ‹è¯•å®Œæ•´ç­–ç•¥æ‰§è¡Œæµç¨‹"""
    
    # æ¨¡æ‹Ÿå¸‚åœºæ•°æ®
    market_data = create_test_market_data(
        regime_score_target=75,  # æ¿€è¿›æ¨¡å¼
        btc_signal="LONG",
        eth_signal="NEUTRAL",
        sol_signal="LONG"
    )
    
    # æ‰§è¡Œç­–ç•¥
    result = await strategy_orchestrator.execute_strategy(
        strategy_definition_id=momentum_strategy_id,
        market_data=market_data
    )
    
    # éªŒè¯ç»“æœ
    assert result["decisions"]["BTC"]["signal"] == "BUY"
    assert result["decisions"]["BTC"]["leverage"] == 3.9  # æ¿€è¿›æ¨¡å¼
    assert result["decisions"]["ETH"]["signal"] == "HOLD"
    assert result["decisions"]["SOL"]["signal"] == "BUY"
    assert result["portfolio_summary"]["open_positions_count"] == 2

async def test_regime_defensive_mode():
    """æµ‹è¯•é˜²å¾¡æ¨¡å¼(Regime Score < 30)"""
    
    market_data = create_test_market_data(
        regime_score_target=25,  # é˜²å¾¡æ¨¡å¼
        btc_signal="LONG"
    )
    
    result = await strategy_orchestrator.execute_strategy(...)
    
    # éªŒè¯: åº”è¯¥æš‚åœæ‰€æœ‰å¼€ä»“
    for asset, decision in result["decisions"].items():
        assert decision["should_execute"] == False

async def test_risk_controls():
    """æµ‹è¯•é£æ§é™åˆ¶"""
    
    # åœºæ™¯1: å•å¸ç§è¶…è¿‡5%é™åˆ¶
    # åœºæ™¯2: æ€»ä»“ä½è¶…è¿‡80%é™åˆ¶
    # åœºæ™¯3: æ æ†è¶…è¿‡5xé™åˆ¶
    # åœºæ™¯4: åŒæ—¶æŒä»“è¶…è¿‡3ä¸ªå¸ç§
    pass
```

---

#### Phase 7: å‰ç«¯UIé€‚é… (2å¤©)

**ä»»åŠ¡**:
- [ ] åœ¨ç­–ç•¥å¸‚åœºå±•ç¤ºåŠ¨é‡ç­–ç•¥æ¨¡æ¿
- [ ] åˆ›å»ºåŠ¨é‡ç­–ç•¥é…ç½®ç•Œé¢
- [ ] æ”¯æŒå¤šå¸ç§æŒä»“å±•ç¤º
- [ ] æ”¯æŒRegime Scoreå¯è§†åŒ–
- [ ] æ”¯æŒ15åˆ†é’ŸKçº¿å›¾è¡¨

**UIç»„ä»¶**:

1. **ç­–ç•¥å¡ç‰‡** (`StrategyMarketplace.tsx`)
   - æ˜¾ç¤ºç­–ç•¥åç§°ã€é£é™©ç­‰çº§ã€å¸ç§åˆ—è¡¨
   - æ˜¾ç¤ºå½“å‰Regime Scoreå’Œæ¨¡å¼

2. **ç­–ç•¥é…ç½®é¢æ¿** (`MomentumStrategyConfigurator.tsx`)
   - åŸºç¡€å‚æ•°é…ç½® (é£é™©%ã€æ æ†ã€æ­¢ç›ˆæ¯”)
   - Regimeé˜ˆå€¼é…ç½®
   - æŠ€æœ¯æŒ‡æ ‡å‚æ•°é…ç½®

3. **ç­–ç•¥è¯¦æƒ…é¡µ** (`StrategyDetails.tsx`)
   - å¤šå¸ç§æŒä»“Tabé¡µ
   - Regime Scoreå†å²æ›²çº¿
   - æ¯ä¸ªå¸ç§çš„æŠ€æœ¯æŒ‡æ ‡å›¾è¡¨

---

#### Phase 8: å›æµ‹å’Œä¼˜åŒ– (3-5å¤©)

**ä»»åŠ¡**:
- [ ] æ”¶é›†å†å²æ•°æ® (è‡³å°‘3ä¸ªæœˆ)
- [ ] å®ç°å›æµ‹å¼•æ“
- [ ] æµ‹è¯•ä¸åŒå‚æ•°ç»„åˆ
- [ ] åˆ†æç­–ç•¥è¡¨ç°æŒ‡æ ‡
- [ ] ä¼˜åŒ–å‚æ•°å’Œè§„åˆ™

**å›æµ‹æŒ‡æ ‡**:
- æ€»æ”¶ç›Šç‡ (Total Return)
- å¤æ™®æ¯”ç‡ (Sharpe Ratio)
- æœ€å¤§å›æ’¤ (Max Drawdown)
- èƒœç‡ (Win Rate)
- ç›ˆäºæ¯” (Profit Factor)
- å¹´åŒ–æ”¶ç›Š (Annualized Return)

**ç›®æ ‡**:
- å¤æ™®æ¯”ç‡ > 1.5
- æœ€å¤§å›æ’¤ < 25%
- èƒœç‡ > 55%
- ç›ˆäºæ¯” > 1.8

---

### 5.2 æ—¶é—´çº¿

| é˜¶æ®µ | ä»»åŠ¡ | å·¥ä½œé‡ | å®Œæˆæ—¥æœŸ |
|-----|------|--------|---------|
| Phase 1 | æ•°æ®å±‚å¼€å‘ | 1-2å¤© | Day 2 |
| Phase 2 | RegimeFilterAgent | 2-3å¤© | Day 5 |
| Phase 3 | TAMomentumAgent | 2-3å¤© | Day 8 |
| Phase 4 | MomentumRegimeDecision | 3-4å¤© | Day 12 |
| Phase 5 | ç­–ç•¥æ¨¡æ¿æ³¨å†Œ | 1å¤© | Day 13 |
| Phase 6 | é›†æˆæµ‹è¯• | 2-3å¤© | Day 16 |
| Phase 7 | å‰ç«¯UIé€‚é… | 2å¤© | Day 18 |
| Phase 8 | å›æµ‹å’Œä¼˜åŒ– | 3-5å¤© | Day 23 |

**æ€»å·¥æœŸ**: çº¦3å‘¨ (16-23å·¥ä½œæ—¥)

---

## å…­ã€æµ‹è¯•ä¸ä¸Šçº¿

### 6.1 æµ‹è¯•ç­–ç•¥

#### å•å…ƒæµ‹è¯• (è¦†ç›–ç‡>80%)
- [ ] RegimeFilterAgentå•å…ƒæµ‹è¯•
- [ ] TAMomentumAgentå•å…ƒæµ‹è¯•
- [ ] MomentumRegimeDecisionå•å…ƒæµ‹è¯•
- [ ] æ•°æ®æœåŠ¡å•å…ƒæµ‹è¯•

#### é›†æˆæµ‹è¯•
- [ ] å®Œæ•´ç­–ç•¥æ‰§è¡Œæµç¨‹
- [ ] å¤šå¸ç§å¹¶è¡Œäº¤æ˜“
- [ ] Regime Scoreåœºæ™¯è¦†ç›–
- [ ] é£æ§é™åˆ¶è§¦å‘
- [ ] æŒä»“ç®¡ç†é€»è¾‘

#### å›æµ‹éªŒè¯
- [ ] 3ä¸ªæœˆå†å²æ•°æ®å›æµ‹
- [ ] ä¸åŒå¸‚åœºç¯å¢ƒæµ‹è¯• (ç‰›å¸‚/ç†Šå¸‚/éœ‡è¡)
- [ ] å‚æ•°æ•æ„Ÿæ€§åˆ†æ
- [ ] å‹åŠ›æµ‹è¯• (æç«¯è¡Œæƒ…)

### 6.2 ä¸Šçº¿è®¡åˆ’

#### ç°åº¦ä¸Šçº¿ (Paper Trading)
1. **Week 1**: å†…éƒ¨æµ‹è¯•
   - 1-2ä¸ªæµ‹è¯•è´¦æˆ·
   - å°é¢èµ„é‡‘ ($1000-5000)
   - å¯†åˆ‡ç›‘æ§æ‰§è¡Œ

2. **Week 2-4**: å°èŒƒå›´å¼€æ”¾
   - å‘Traderè§’è‰²ç”¨æˆ·å¼€æ”¾
   - é™åˆ¶å•è´¦æˆ·æœ€å¤§èµ„é‡‘
   - æ”¶é›†ç”¨æˆ·åé¦ˆ

3. **Week 5+**: æ­£å¼ä¸Šçº¿
   - å‘æ‰€æœ‰ç”¨æˆ·å¼€æ”¾
   - ç§»é™¤èµ„é‡‘é™åˆ¶
   - æŒç»­ç›‘æ§å’Œä¼˜åŒ–

---

## ä¸ƒã€é£é™©ä¸ç›‘æ§

### 7.1 é£é™©ç‚¹

| é£é™© | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½ |
|-----|-------|------|---------|
| **APIé™æµ** | ä¸­ | é«˜ | å®ç°è¯·æ±‚é˜Ÿåˆ—å’Œç¼“å­˜,é¿å…é¢‘ç¹è°ƒç”¨ |
| **æ•°æ®å¼‚å¸¸** | ä¸­ | é«˜ | æ•°æ®æ ¡éªŒå’Œå¼‚å¸¸å¤„ç†,é™çº§ç­–ç•¥ |
| **LLMè¶…æ—¶** | ä¸­ | ä¸­ | è®¾ç½®è¶…æ—¶é‡è¯•,RegimeFilterå¯ç”¨è§„åˆ™é™çº§ |
| **å¤šå¸ç§åŒæ—¶æ­¢æŸ** | ä½ | é«˜ | è®¾ç½®æ€»ä»“ä½é™åˆ¶,åˆ†æ•£å¼€ä»“æ—¶é—´ |
| **é«˜æ³¢åŠ¨æç«¯è¡Œæƒ…** | ä½ | é«˜ | ç†”æ–­æœºåˆ¶,æš‚åœäº¤æ˜“ |
| **èµ„é‡‘è´¹ç‡å¼‚å¸¸** | ä½ | ä¸­ | ç›‘æ§èµ„é‡‘è´¹ç‡,è‡ªåŠ¨å¹³ä»“ä¿æŠ¤ |

### 7.2 ç›‘æ§æŒ‡æ ‡

#### å®æ—¶ç›‘æ§
- [ ] Regime Scoreå®æ—¶å€¼å’Œå˜åŒ–
- [ ] å„å¸ç§æŒä»“çŠ¶æ€
- [ ] æµ®åŠ¨ç›ˆäº
- [ ] APIè°ƒç”¨æˆåŠŸç‡
- [ ] Agentæ‰§è¡Œæ—¶é—´

#### æ—¥æŠ¥æŒ‡æ ‡
- [ ] æ¯æ—¥æ”¶ç›Šç‡
- [ ] äº¤æ˜“æ¬¡æ•°å’Œèƒœç‡
- [ ] æœ€å¤§å›æ’¤
- [ ] Regime Scoreåˆ†å¸ƒ
- [ ] å¸ç§èƒœç‡å¯¹æ¯”

#### å‘¨æŠ¥æŒ‡æ ‡
- [ ] å‘¨åº¦æ”¶ç›Š
- [ ] å¤æ™®æ¯”ç‡
- [ ] ç­–ç•¥å‚æ•°æ¼‚ç§»
- [ ] ç”¨æˆ·ä½¿ç”¨æƒ…å†µ

### 7.3 å‘Šè­¦è§„åˆ™

```python
å‘Šè­¦è§„åˆ™:

1. å•æ—¥äºæŸè¶…è¿‡5% â†’ ç«‹å³å‘Šè­¦
2. è¿ç»­5æ¬¡äº¤æ˜“æ­¢æŸ â†’ æš‚åœç­–ç•¥,äººå·¥å®¡æŸ¥
3. Regime Scoreå¼‚å¸¸æ³¢åŠ¨ (Â±30åˆ†/å°æ—¶) â†’ æ£€æŸ¥æ•°æ®æº
4. APIè°ƒç”¨å¤±è´¥ç‡>10% â†’ æŠ€æœ¯æ’æŸ¥
5. æŸå¸ç§è¿ç»­3æ¬¡æ­¢æŸ â†’ æš‚åœè¯¥å¸ç§äº¤æ˜“
6. æ€»ä»“ä½è¶…è¿‡85% â†’ é£æ§å‘Šè­¦
```

---

## å…«ã€æ€»ç»“ä¸å±•æœ›

### 8.1 æ ¸å¿ƒä¼˜åŠ¿

1. **æ™ºèƒ½åˆ¶åº¦è¿‡æ»¤**: AIè¯„ä¼°å¸‚åœºç¯å¢ƒ,é¿å…"é€†é£äº¤æ˜“"
2. **åŠ¨æ€å‚æ•°è°ƒåˆ¶**: æ ¹æ®å¸‚åœºçŠ¶æ€è‡ªåŠ¨è°ƒæ•´é£é™©æš´éœ²
3. **å¤šå¸ç§åˆ†æ•£**: BTC/ETH/SOLé™ä½å•å¸ç§é£é™©
4. **è§„åˆ™é€æ˜**: æ‰€æœ‰å†³ç­–é€»è¾‘å¯è¿½æº¯,ä¾¿äºä¼˜åŒ–

### 8.2 æœªæ¥æ‰©å±•

#### Phase 2åŠŸèƒ½ (3-6ä¸ªæœˆå)
- [ ] æ·»åŠ æ›´å¤šå¸ç§ (AVAX, MATICç­‰)
- [ ] æ”¯æŒå¤šæ—¶é—´æ¡†æ¶åˆ‡æ¢ (5åˆ†é’Ÿ/30åˆ†é’Ÿ/60åˆ†é’Ÿ)
- [ ] å¢åŠ é“¾ä¸ŠæŒ‡æ ‡ (æ´»è·ƒåœ°å€ã€äº¤æ˜“æ‰€æµé‡)
- [ ] å®ç°åˆ†æ‰¹æ­¢ç›ˆç­–ç•¥
- [ ] æ”¯æŒå¯¹å†²ç­–ç•¥ (å¤šç©ºé…å¯¹)

#### Phase 3åŠŸèƒ½ (6-12ä¸ªæœˆå)
- [ ] æœºå™¨å­¦ä¹ ä¼˜åŒ–Regime Scoreè®¡ç®—
- [ ] è‡ªé€‚åº”å‚æ•°è°ƒä¼˜
- [ ] è·¨äº¤æ˜“æ‰€å¥—åˆ©
- [ ] æœŸæƒå¯¹å†²ç­–ç•¥

---

## é™„å½•

### A. å‚æ•°é€ŸæŸ¥è¡¨

| å‚æ•° | é»˜è®¤å€¼ | èŒƒå›´ | è¯´æ˜ |
|-----|-------|------|------|
| base_risk_pct | 0.5% | 0.2%-1.0% | å•ç¬”é£é™©ç™¾åˆ†æ¯” |
| base_leverage | 3x | 1x-5x | åŸºç¡€æ æ†å€æ•° |
| base_tp_rr | 2.0 | 1.5-3.0 | æ­¢ç›ˆ/æ­¢æŸæ¯”ä¾‹ |
| atr_multiplier | 2.0 | 1.5-3.0 | ATRæ­¢æŸå€æ•° |
| regime_defensive | 30 | 20-40 | é˜²å¾¡æ¨¡å¼é˜ˆå€¼ |
| regime_aggressive | 70 | 60-80 | æ¿€è¿›æ¨¡å¼é˜ˆå€¼ |
| max_leverage | 5x | 3x-10x | æœ€å¤§æ æ†é™åˆ¶ |
| max_positions | 3 | 2-5 | æœ€å¤§æŒä»“å¸ç§æ•° |

### B. APIç«¯ç‚¹

```
GET  /api/v1/strategy-definitions?tag=momentum
     è·å–åŠ¨é‡ç­–ç•¥æ¨¡æ¿åˆ—è¡¨

POST /api/v1/strategies
     åˆ›å»ºåŠ¨é‡ç­–ç•¥å®ä¾‹

GET  /api/v1/strategies/{id}/executions
     è·å–ç­–ç•¥æ‰§è¡Œå†å²

GET  /api/v1/strategies/{id}/regime-score-history
     è·å–Regime Scoreå†å²æ•°æ®

POST /api/v1/strategies/{id}/backtest
     å¯åŠ¨å›æµ‹
```

### C. æ•°æ®åº“Schemaå˜æ›´

```sql
-- æ— éœ€æ–°å¢è¡¨,ä½¿ç”¨ç°æœ‰strategy_definitionså’Œportfoliosè¡¨
-- ä»…éœ€åœ¨strategy_definitionsæ·»åŠ ä¸€æ¡è®°å½•

INSERT INTO strategy_definitions (
  name,
  display_name,
  description,
  business_agents,
  decision_agent_module,
  decision_agent_class,
  trade_channel,
  trade_symbols,
  rebalance_period_minutes,
  default_params,
  tags,
  risk_level,
  is_active
) VALUES (
  'momentum_regime_multiasset_v1',
  'åŠ¨é‡åˆ¶åº¦å¤šå¸ç§ç­–ç•¥ v1',
  'AIé©±åŠ¨çš„åˆ¶åº¦è¿‡æ»¤å™¨+è§„åˆ™åŒ–æŠ€æœ¯åˆ†æ...',
  '["regime_filter", "ta_momentum"]',
  'app.decision_agents.momentum_regime_decision',
  'MomentumRegimeDecision',
  'binance_futures',
  '["BTC/USDT", "ETH/USDT", "SOL/USDT"]',
  15,
  '{...}',  -- JSONæ ¼å¼çš„é»˜è®¤å‚æ•°
  '["momentum", "multi-asset", "high-frequency"]',
  'AGGRESSIVE',
  true
);
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-13  
**ç»´æŠ¤è€…**: AI Assistant  
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸

